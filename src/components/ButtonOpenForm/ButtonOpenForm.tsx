"use client";

import { useRouterQuery, useWindowSizes } from "../../hooks";
import React from "react";
import s from "./ButtonOpenForm.module.scss";
import { useApp } from "../../store";
import classNames from "classnames";

export function ButtonOpenForm() {
    const { mutate } = useRouterQuery();
    const isFooterFormInView = useApp((state) => state.isFooterFormInView);
    const isFooterInView = useApp((state) => state.isFooterInView);

    const { width } = useWindowSizes()

    const handleOpenForm = () => {
        mutate({
            query: { form: "request" },
        });
    };

    // Костыль, но там стрелки кривые походу
    const ArrowResize = () => {
        if (width > 1550) {
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width="1454" height="20" viewBox="0 0 1454 20" fill="none" preserveAspectRatio="none">
                    <path d="M1442.67 18.6283L1442.29 18.9627L1442.96 19.7061L1443.33 19.3717L1442.67 18.6283ZM1453 10.0029L1453.33 10.3746C1453.44 10.2798 1453.5 10.1447 1453.5 10.003C1453.5 9.86126 1453.44 9.72616 1453.33 9.63132L1453 10.0029ZM1443.33 0.628406L1442.96 0.293864L1442.29 1.03705L1442.67 1.37159L1443.33 0.628406ZM1 9.50176L0.500001 9.50176L0.499999 10.5018L0.999999 10.5018L1 9.50176ZM1437.37 10.0033V10.5033V10.0033ZM1443.33 19.3717L1453.33 10.3746L1452.67 9.63122L1442.67 18.6283L1443.33 19.3717ZM1453.33 9.63132L1443.33 0.628406L1442.67 1.37159L1452.67 10.3745L1453.33 9.63132ZM0.999999 10.5018L1437.37 10.5033V9.50325L1 9.50176L0.999999 10.5018ZM1437.37 10.5033L1453 10.5029V9.50292L1437.37 9.50325V10.5033Z" fill="#ECECEC" />
                </svg>
            )
        } else if (width > 1024 && width <= 1550) {
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width="1084" height="20" viewBox="0 0 1084 20" fill="none" preserveAspectRatio="none">
                    <path d="M1072.67 18.6283L1072.29 18.9627L1072.96 19.7061L1073.33 19.3717L1072.67 18.6283ZM1083 10.0029L1083.33 10.3746C1083.44 10.2798 1083.5 10.1447 1083.5 10.003C1083.5 9.86126 1083.44 9.72616 1083.33 9.63132L1083 10.0029ZM1073.33 0.628406L1072.96 0.293864L1072.29 1.03705L1072.67 1.37159L1073.33 0.628406ZM1 9.50176L0.500001 9.50176L0.499999 10.5018L0.999999 10.5018L1 9.50176ZM1067.37 10.0033V10.5033V10.0033ZM1073.33 19.3717L1083.33 10.3746L1082.67 9.63122L1072.67 18.6283L1073.33 19.3717ZM1083.33 9.63132L1073.33 0.628406L1072.67 1.37159L1082.67 10.3745L1083.33 9.63132ZM0.999999 10.5018L1067.37 10.5033V9.50325L1 9.50176L0.999999 10.5018ZM1067.37 10.5033L1083 10.5029V9.50292L1067.37 9.50325V10.5033Z" fill="#ECECEC" />
                </svg>
            )
        } else if (width > 768 && width <= 1024) {
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width="790" height="20" viewBox="0 0 790 20" fill="none" preserveAspectRatio="none">
                    <path d="M778.666 18.6283L778.294 18.9627L778.963 19.7061L779.334 19.3717L778.666 18.6283ZM789 10.0029L789.334 10.3746C789.44 10.2798 789.5 10.1447 789.5 10.003C789.5 9.86126 789.44 9.72616 789.335 9.63132L789 10.0029ZM779.335 0.628406L778.963 0.293864L778.294 1.03705L778.665 1.37159L779.335 0.628406ZM0.999999 9.50468L0.499999 9.50468L0.500001 10.5047L1 10.5047L0.999999 9.50468ZM773.373 10.0033V10.5033V10.0033ZM779.334 19.3717L789.334 10.3746L788.666 9.63122L778.666 18.6283L779.334 19.3717ZM789.335 9.63132L779.335 0.628406L778.665 1.37159L788.665 10.3745L789.335 9.63132ZM1 10.5047L773.373 10.5033V9.50325L0.999999 9.50468L1 10.5047ZM773.373 10.5033L789 10.5029V9.50292L773.373 9.50325V10.5033Z" fill="#ECECEC" />
                </svg>
            )
        } else if (width > 550 && width <= 768) {
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width="534" height="20" viewBox="0 0 534 20" fill="none" preserveAspectRatio="none">
                    <path d="M522.666 18.6283L522.294 18.9627L522.963 19.7061L523.334 19.3717L522.666 18.6283ZM533 10.0029L533.334 10.3746C533.44 10.2798 533.5 10.1447 533.5 10.003C533.5 9.86126 533.44 9.72616 533.335 9.63132L533 10.0029ZM523.335 0.628406L522.963 0.293864L522.294 1.03705L522.665 1.37159L523.335 0.628406ZM1.00048 9.00468L0.500483 9.0042L0.499518 10.0042L0.999517 10.0047L1.00048 9.00468ZM517.373 10.0033L517.372 10.5033H517.373V10.0033ZM523.334 19.3717L533.334 10.3746L532.666 9.63122L522.666 18.6283L523.334 19.3717ZM533.335 9.63132L523.335 0.628406L522.665 1.37159L532.665 10.3745L533.335 9.63132ZM0.999517 10.0047L517.372 10.5033L517.373 9.50325L1.00048 9.00468L0.999517 10.0047ZM517.373 10.5033L533 10.5029V9.50292L517.373 9.50325V10.5033Z" fill="#ECECEC" />
                </svg>
            )
        } else if (width > 360 && width <= 550) {
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width="252" height="18" viewBox="0 0 252 18" fill="none" preserveAspectRatio="none">
                    <path d="M242.647 16.6464L242.293 16.9999L243 17.7071L243.353 17.3536L242.647 16.6464ZM251 9.00292L251.353 9.35654C251.549 9.16131 251.549 8.84473 251.354 8.64943L251 9.00292ZM243.354 0.64651L243 0.292892L242.293 0.999869L242.646 1.35349L243.354 0.64651ZM0.998936 9.00182L0.498938 9.00288L0.501065 10.0029L1.00106 10.0018L0.998936 9.00182ZM235.373 9.00325L235.373 8.50325L235.372 8.50325L235.373 9.00325ZM243.353 17.3536L251.353 9.35654L250.647 8.6493L242.647 16.6464L243.353 17.3536ZM251.354 8.64943L243.354 0.64651L242.646 1.35349L250.646 9.35641L251.354 8.64943ZM1.00106 10.0018L235.374 9.50325L235.372 8.50325L0.998936 9.00182L1.00106 10.0018ZM235.373 9.50325L251 9.50292L251 8.50292L235.373 8.50325L235.373 9.50325Z" fill="#ECECEC" />
                </svg>
            )
        } else if (width > 360 && width <= 320) {
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width="182" height="18" viewBox="0 0 182 18" fill="none" preserveAspectRatio="none">
                    <path d="M172.647 16.6464L172.293 16.9999L173 17.7071L173.353 17.3536L172.647 16.6464ZM181 9.00292L181.353 9.35654C181.549 9.16131 181.549 8.84473 181.354 8.64943L181 9.00292ZM173.354 0.64651L173 0.292892L172.293 0.999869L172.646 1.35349L173.354 0.64651ZM0.998483 9.00182L0.498486 9.00334L0.501519 10.0033L1.00152 10.0018L0.998483 9.00182ZM165.373 9.00325L165.373 8.50325L165.371 8.50325L165.373 9.00325ZM173.353 17.3536L181.353 9.35654L180.647 8.6493L172.647 16.6464L173.353 17.3536ZM181.354 8.64943L173.354 0.64651L172.646 1.35349L180.646 9.35641L181.354 8.64943ZM1.00152 10.0018L165.374 9.50325L165.371 8.50325L0.998483 9.00182L1.00152 10.0018ZM165.373 9.50325L181 9.50292L181 8.50292L165.373 8.50325L165.373 9.50325Z" fill="#ECECEC" />
                </svg>
            )
        } else {
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width="155" height="18" viewBox="0 0 155 18" fill="none" preserveAspectRatio="none">
                    <path d="M145.647 16.6464L145.293 16.9999L146 17.7071L146.353 17.3536L145.647 16.6464ZM154 9.00292L154.353 9.35654C154.549 9.16131 154.549 8.84473 154.354 8.64943L154 9.00292ZM146.354 0.64651L146 0.292892L145.293 0.999869L145.646 1.35349L146.354 0.64651ZM0.998185 9.00182L0.498189 9.00364L0.501818 10.0036L1.00181 10.0018L0.998185 9.00182ZM138.373 9.00325L138.373 8.50325L138.371 8.50325L138.373 9.00325ZM146.353 17.3536L154.353 9.35654L153.647 8.6493L145.647 16.6464L146.353 17.3536ZM154.354 8.64943L146.354 0.64651L145.646 1.35349L153.646 9.35641L154.354 8.64943ZM1.00181 10.0018L138.375 9.50325L138.371 8.50325L0.998185 9.00182L1.00181 10.0018ZM138.373 9.50325L154 9.50292L154 8.50292L138.373 8.50325L138.373 9.50325Z" fill="#ECECEC" />
                </svg>
            )
        }
    }

    return (
        <div
            className={classNames(s.btn_wrapper, {
                [s.hide]: isFooterFormInView || isFooterInView,
            })}
        >
            <button type={"button"} onClick={() => handleOpenForm()}>
                <span>Заказать сайт</span>
                <ArrowResize />
            </button>
        </div>
    );
}
